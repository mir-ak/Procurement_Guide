{"ast":null,"code":"var _jsxFileName = \"/media/karim/Data_SSD/Procurement_Guide/client/src/components/commentaire/Commentaire.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport databaseApp from \"../../config/firebaseConfig\";\nimport { ref, onValue, child, update } from \"firebase/database\";\nimport MaterialIcon from \"material-icons-react\";\nimport IconButton from \"@mui/material/IconButton\";\nimport ApexChart from \"./ApexChart\";\nimport ReactiveButton from \"reactive-button\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ExperClass(_ref) {\n  _s();\n\n  let {\n    id\n  } = _ref;\n  let i = 0;\n  const comments = {\n    compentPositive: 0,\n    compentNegative: 0\n  };\n  const [db_list, setDb_list] = useState([]);\n  const [state, setState] = useState(\"idle\");\n  useEffect(() => {\n    function init_db() {\n      onValue(ref(databaseApp, \"comments/\" + id.id), snapshot => {\n        let previousList = snapshot.val();\n        let list = [];\n\n        for (let item in previousList) {\n          list.push({\n            item,\n            ...previousList[item]\n          });\n        }\n\n        setDb_list(list);\n      });\n    }\n\n    init_db();\n  }, [id]);\n  /* const deletdata= (index) =>{\n    console.log(index);\n    remove(child(ref(databaseApp), \"comment/\"+id.id+'/'+index));   \n  } */\n\n  const onClickHandler = () => {\n    setState(\"loading\");\n    setTimeout(() => {\n      setState(\"success\");\n    }, 19500);\n  };\n\n  const callfunction = () => {\n    fetch(\"/IsOk?IsOk=yes\").then(res => res.json()).then(data => {\n      console.log(data[\"IsOk\"]);\n    });\n  };\n\n  const updatedata = index => {\n    console.log(index);\n\n    if (index.predire === \"positive\") {\n      update(child(ref(databaseApp), \"comments/\" + id.id + \"/\" + index.item), {\n        commentaire: index.commentaire,\n        predire: \"negative\"\n      });\n    } else {\n      update(child(ref(databaseApp), \"comments/\" + id.id + \"/\" + index.item), {\n        commentaire: index.commentaire,\n        predire: \"positive\"\n      });\n    }\n  };\n\n  const countComments = () => {\n    db_list.forEach(item => {\n      if (item.predire === \"positive\") {\n        comments.compentPositive++;\n      } else {\n        comments.compentNegative++;\n      }\n    });\n    return comments;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [id.admin ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"5%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(ApexChart, {\n        comments: countComments()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          float: \"right\"\n        },\n        children: /*#__PURE__*/_jsxDEV(ReactiveButton, {\n          buttonState: state,\n          onClick: () => {\n            onClickHandler();\n            callfunction();\n          },\n          color: \"teal\",\n          width: \"200px\",\n          animation: true,\n          style: {\n            borderRadius: \"25px\",\n            marginTop: \"170%\",\n            marginLeft: \"-30%\"\n          },\n          idleText: \"Relancer le Modèle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this) : null, db_list && db_list.map(item => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ShowComment\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [/*#__PURE__*/_jsxDEV(MaterialIcon, {\n            icon: \"account_circle\",\n            size: 30,\n            color: \"#000000\",\n            invert: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 17\n          }, this), \" \", \"user\", ++i, \" :\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text_\",\n          children: [item.commentaire, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 36\n          }, this), id.admin ? /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\" \", \"avis : \", item.predire, /*#__PURE__*/_jsxDEV(IconButton, {\n              onClick: updatedata.bind(this, item),\n              children: /*#__PURE__*/_jsxDEV(MaterialIcon, {\n                icon: \"update\",\n                size: 25,\n                color: \"rgb(139, 0, 0)\",\n                invert: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 19\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }, this)]\n      }, item.commentaire, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ExperClass, \"/T01mWMG5sjgmbkXEByVfyPkjdk=\");\n\n_c = ExperClass;\n\nvar _c;\n\n$RefreshReg$(_c, \"ExperClass\");","map":{"version":3,"names":["React","useEffect","useState","databaseApp","ref","onValue","child","update","MaterialIcon","IconButton","ApexChart","ReactiveButton","ExperClass","id","i","comments","compentPositive","compentNegative","db_list","setDb_list","state","setState","init_db","snapshot","previousList","val","list","item","push","onClickHandler","setTimeout","callfunction","fetch","then","res","json","data","console","log","updatedata","index","predire","commentaire","countComments","forEach","admin","margin","float","borderRadius","marginTop","marginLeft","map","bind"],"sources":["/media/karim/Data_SSD/Procurement_Guide/client/src/components/commentaire/Commentaire.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport databaseApp from \"../../config/firebaseConfig\";\nimport { ref, onValue, child, update } from \"firebase/database\";\nimport MaterialIcon from \"material-icons-react\";\nimport IconButton from \"@mui/material/IconButton\";\nimport ApexChart from \"./ApexChart\";\nimport ReactiveButton from \"reactive-button\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nexport default function ExperClass({ id }) {\n  let i = 0;\n  const comments = { compentPositive: 0, compentNegative: 0 };\n  const [db_list, setDb_list] = useState([]);\n  const [state, setState] = useState(\"idle\");\n  useEffect(() => {\n    function init_db() {\n      onValue(ref(databaseApp, \"comments/\" + id.id), (snapshot) => {\n        let previousList = snapshot.val();\n        let list = [];\n        for (let item in previousList) {\n          list.push({ item, ...previousList[item] });\n        }\n        setDb_list(list);\n      });\n    }\n    init_db();\n  }, [id]);\n\n  /* const deletdata= (index) =>{\n    console.log(index);\n    remove(child(ref(databaseApp), \"comment/\"+id.id+'/'+index));   \n  } */\n\n  const onClickHandler = () => {\n    setState(\"loading\");\n    setTimeout(() => {\n      setState(\"success\");\n    }, 19500);\n  };\n  const callfunction = () => {\n    fetch(\"/IsOk?IsOk=yes\")\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(data[\"IsOk\"]);\n      });\n  };\n\n  const updatedata = (index) => {\n    console.log(index);\n    if (index.predire === \"positive\") {\n      update(child(ref(databaseApp), \"comments/\" + id.id + \"/\" + index.item), {\n        commentaire: index.commentaire,\n        predire: \"negative\",\n      });\n    } else {\n      update(child(ref(databaseApp), \"comments/\" + id.id + \"/\" + index.item), {\n        commentaire: index.commentaire,\n        predire: \"positive\",\n      });\n    }\n  };\n\n  const countComments = () => {\n    db_list.forEach((item) => {\n      if (item.predire === \"positive\") {\n        comments.compentPositive++;\n      } else {\n        comments.compentNegative++;\n      }\n    });\n    return comments;\n  };\n\n  return (\n    <div>\n      {id.admin ? (\n        <div style={{ margin: \"5%\" }}>\n          <ApexChart comments={countComments()} />\n          <div style={{ float: \"right\" }}>\n            <ReactiveButton\n              buttonState={state}\n              onClick={() => {\n                onClickHandler();\n                callfunction();\n              }}\n              color=\"teal\"\n              width={\"200px\"}\n              animation={true}\n              style={{\n                borderRadius: \"25px\",\n                marginTop: \"170%\",\n                marginLeft: \"-30%\",\n              }}\n              idleText={\"Relancer le Modèle\"}\n            />\n          </div>\n        </div>\n      ) : null}\n      {db_list &&\n        db_list.map((item) => {\n          return (\n            <div className=\"ShowComment\" key={item.commentaire}>\n              <h4>\n                <MaterialIcon\n                  icon=\"account_circle\"\n                  size={30}\n                  color=\"#000000\"\n                  invert\n                />{\" \"}\n                user{++i} :{\" \"}\n              </h4>\n              <p className=\"text_\">\n                {item.commentaire} <br></br>\n                {id.admin ? (\n                  <span>\n                    {\" \"}\n                    avis : {item.predire}\n                    <IconButton onClick={updatedata.bind(this, item)}>\n                      <MaterialIcon\n                        icon=\"update\"\n                        size={25}\n                        color=\"rgb(139, 0, 0)\"\n                        invert\n                      />\n                    </IconButton>\n                  </span>\n                ) : null}\n              </p>\n            </div>\n          );\n        })}\n    </div>\n  );\n}\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,WAAP,MAAwB,6BAAxB;AACA,SAASC,GAAT,EAAcC,OAAd,EAAuBC,KAAvB,EAA8BC,MAA9B,QAA4C,mBAA5C;AACA,OAAOC,YAAP,MAAyB,sBAAzB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,cAAP,MAA2B,iBAA3B;AACA,OAAO,sCAAP;;AAEA,eAAe,SAASC,UAAT,OAA4B;EAAA;;EAAA,IAAR;IAAEC;EAAF,CAAQ;EACzC,IAAIC,CAAC,GAAG,CAAR;EACA,MAAMC,QAAQ,GAAG;IAAEC,eAAe,EAAE,CAAnB;IAAsBC,eAAe,EAAE;EAAvC,CAAjB;EACA,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBjB,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACkB,KAAD,EAAQC,QAAR,IAAoBnB,QAAQ,CAAC,MAAD,CAAlC;EACAD,SAAS,CAAC,MAAM;IACd,SAASqB,OAAT,GAAmB;MACjBjB,OAAO,CAACD,GAAG,CAACD,WAAD,EAAc,cAAcU,EAAE,CAACA,EAA/B,CAAJ,EAAyCU,QAAD,IAAc;QAC3D,IAAIC,YAAY,GAAGD,QAAQ,CAACE,GAAT,EAAnB;QACA,IAAIC,IAAI,GAAG,EAAX;;QACA,KAAK,IAAIC,IAAT,IAAiBH,YAAjB,EAA+B;UAC7BE,IAAI,CAACE,IAAL,CAAU;YAAED,IAAF;YAAQ,GAAGH,YAAY,CAACG,IAAD;UAAvB,CAAV;QACD;;QACDR,UAAU,CAACO,IAAD,CAAV;MACD,CAPM,CAAP;IAQD;;IACDJ,OAAO;EACR,CAZQ,EAYN,CAACT,EAAD,CAZM,CAAT;EAcA;AACF;AACA;AACA;;EAEE,MAAMgB,cAAc,GAAG,MAAM;IAC3BR,QAAQ,CAAC,SAAD,CAAR;IACAS,UAAU,CAAC,MAAM;MACfT,QAAQ,CAAC,SAAD,CAAR;IACD,CAFS,EAEP,KAFO,CAAV;EAGD,CALD;;EAMA,MAAMU,YAAY,GAAG,MAAM;IACzBC,KAAK,CAAC,gBAAD,CAAL,CACGC,IADH,CACSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADjB,EAEGF,IAFH,CAESG,IAAD,IAAU;MACdC,OAAO,CAACC,GAAR,CAAYF,IAAI,CAAC,MAAD,CAAhB;IACD,CAJH;EAKD,CAND;;EAQA,MAAMG,UAAU,GAAIC,KAAD,IAAW;IAC5BH,OAAO,CAACC,GAAR,CAAYE,KAAZ;;IACA,IAAIA,KAAK,CAACC,OAAN,KAAkB,UAAtB,EAAkC;MAChClC,MAAM,CAACD,KAAK,CAACF,GAAG,CAACD,WAAD,CAAJ,EAAmB,cAAcU,EAAE,CAACA,EAAjB,GAAsB,GAAtB,GAA4B2B,KAAK,CAACb,IAArD,CAAN,EAAkE;QACtEe,WAAW,EAAEF,KAAK,CAACE,WADmD;QAEtED,OAAO,EAAE;MAF6D,CAAlE,CAAN;IAID,CALD,MAKO;MACLlC,MAAM,CAACD,KAAK,CAACF,GAAG,CAACD,WAAD,CAAJ,EAAmB,cAAcU,EAAE,CAACA,EAAjB,GAAsB,GAAtB,GAA4B2B,KAAK,CAACb,IAArD,CAAN,EAAkE;QACtEe,WAAW,EAAEF,KAAK,CAACE,WADmD;QAEtED,OAAO,EAAE;MAF6D,CAAlE,CAAN;IAID;EACF,CAbD;;EAeA,MAAME,aAAa,GAAG,MAAM;IAC1BzB,OAAO,CAAC0B,OAAR,CAAiBjB,IAAD,IAAU;MACxB,IAAIA,IAAI,CAACc,OAAL,KAAiB,UAArB,EAAiC;QAC/B1B,QAAQ,CAACC,eAAT;MACD,CAFD,MAEO;QACLD,QAAQ,CAACE,eAAT;MACD;IACF,CAND;IAOA,OAAOF,QAAP;EACD,CATD;;EAWA,oBACE;IAAA,WACGF,EAAE,CAACgC,KAAH,gBACC;MAAK,KAAK,EAAE;QAAEC,MAAM,EAAE;MAAV,CAAZ;MAAA,wBACE,QAAC,SAAD;QAAW,QAAQ,EAAEH,aAAa;MAAlC;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QAAK,KAAK,EAAE;UAAEI,KAAK,EAAE;QAAT,CAAZ;QAAA,uBACE,QAAC,cAAD;UACE,WAAW,EAAE3B,KADf;UAEE,OAAO,EAAE,MAAM;YACbS,cAAc;YACdE,YAAY;UACb,CALH;UAME,KAAK,EAAC,MANR;UAOE,KAAK,EAAE,OAPT;UAQE,SAAS,EAAE,IARb;UASE,KAAK,EAAE;YACLiB,YAAY,EAAE,MADT;YAELC,SAAS,EAAE,MAFN;YAGLC,UAAU,EAAE;UAHP,CATT;UAcE,QAAQ,EAAE;QAdZ;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA;MAAA;MAAA;MAAA;IAAA,QADD,GAsBG,IAvBN,EAwBGhC,OAAO,IACNA,OAAO,CAACiC,GAAR,CAAaxB,IAAD,IAAU;MACpB,oBACE;QAAK,SAAS,EAAC,aAAf;QAAA,wBACE;UAAA,wBACE,QAAC,YAAD;YACE,IAAI,EAAC,gBADP;YAEE,IAAI,EAAE,EAFR;YAGE,KAAK,EAAC,SAHR;YAIE,MAAM;UAJR;YAAA;YAAA;YAAA;UAAA,QADF,EAMK,GANL,UAOO,EAAEb,CAPT,QAOc,GAPd;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAUE;UAAG,SAAS,EAAC,OAAb;UAAA,WACGa,IAAI,CAACe,WADR,oBACqB;YAAA;YAAA;YAAA;UAAA,QADrB,EAEG7B,EAAE,CAACgC,KAAH,gBACC;YAAA,WACG,GADH,aAEUlB,IAAI,CAACc,OAFf,eAGE,QAAC,UAAD;cAAY,OAAO,EAAEF,UAAU,CAACa,IAAX,CAAgB,IAAhB,EAAsBzB,IAAtB,CAArB;cAAA,uBACE,QAAC,YAAD;gBACE,IAAI,EAAC,QADP;gBAEE,IAAI,EAAE,EAFR;gBAGE,KAAK,EAAC,gBAHR;gBAIE,MAAM;cAJR;gBAAA;gBAAA;gBAAA;cAAA;YADF;cAAA;cAAA;cAAA;YAAA,QAHF;UAAA;YAAA;YAAA;YAAA;UAAA,QADD,GAaG,IAfN;QAAA;UAAA;UAAA;UAAA;QAAA,QAVF;MAAA,GAAkCA,IAAI,CAACe,WAAvC;QAAA;QAAA;QAAA;MAAA,QADF;IA8BD,CA/BD,CAzBJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AA4DD;;GA5HuB9B,U;;KAAAA,U"},"metadata":{},"sourceType":"module"}