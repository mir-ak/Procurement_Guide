{"ast":null,"code":"var _jsxFileName = \"/media/karim/Data_SSD/Procurement_Guide/client/src/components/commentaire/Commentaire.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport databaseApp from '../../config/firebaseConfig';\nimport { ref, onValue, child, update } from \"firebase/database\";\nimport MaterialIcon from 'material-icons-react';\nimport IconButton from '@mui/material/IconButton';\nimport ApexChart from './ApexChart';\nimport ReactiveButton from 'reactive-button';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ExperClass(_ref) {\n  _s();\n\n  let {\n    id\n  } = _ref;\n  let i = 0;\n  const comments = {\n    compentPositive: 0,\n    compentNegative: 0\n  };\n  const [db_list, setDb_list] = useState([]);\n  const [state, setState] = useState('idle');\n  useEffect(() => {\n    function init_db() {\n      onValue(ref(databaseApp, \"comments/\" + id.id), snapshot => {\n        let previousList = snapshot.val();\n        let list = [];\n\n        for (let item in previousList) {\n          list.push({\n            item,\n            ...previousList[item]\n          });\n        }\n\n        setDb_list(list);\n      });\n    }\n\n    init_db();\n  }, [id]);\n  /* const deletdata= (index) =>{\n    console.log(index);\n    remove(child(ref(databaseApp), \"comment/\"+id.id+'/'+index));   \n  } */\n\n  const onClickHandler = () => {\n    setState('loading');\n    setTimeout(() => {\n      setState('success');\n    }, 19500);\n  };\n\n  const callfunction = () => {\n    fetch(\"/IsOk?IsOk=yes\").then(res => res.json()).then(data => {\n      console.log(data['IsOk']);\n    });\n  };\n\n  const updatedata = index => {\n    console.log(index);\n\n    if (index.predire === \"positive\") {\n      update(child(ref(databaseApp), \"comments/\" + id.id + \"/\" + index.item), {\n        commentaire: index.commentaire,\n        predire: \"negative\"\n      });\n    } else {\n      update(child(ref(databaseApp), \"comments/\" + id.id + \"/\" + index.item), {\n        commentaire: index.commentaire,\n        predire: \"positive\"\n      });\n    }\n  };\n\n  const countComments = () => {\n    db_list.map(item => {\n      if (item.predire === \"positive\") {\n        comments.compentPositive++;\n      } else {\n        comments.compentNegative++;\n      }\n    });\n    return comments;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [id.admin ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: \"5%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(ApexChart, {\n        comments: countComments()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          float: 'right'\n        },\n        children: /*#__PURE__*/_jsxDEV(ReactiveButton, {\n          buttonState: state,\n          onClick: () => {\n            onClickHandler();\n            callfunction();\n          },\n          color: \"teal\",\n          width: '200px',\n          animation: true,\n          style: {\n            borderRadius: '25px',\n            marginTop: '170%',\n            marginLeft: '15%'\n          },\n          idleText: 'Relancer le Modèle'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this) : null, db_list && db_list.map(item => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ShowComment\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [/*#__PURE__*/_jsxDEV(MaterialIcon, {\n            icon: \"account_circle\",\n            size: 30,\n            color: \"#000000\",\n            invert: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 19\n          }, this), \" user\", ++i, \" : \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text_\",\n          children: [item.commentaire, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 36\n          }, this), id.admin ? /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\" avis : \", item.predire, /*#__PURE__*/_jsxDEV(IconButton, {\n              onClick: updatedata.bind(this, item),\n              children: /*#__PURE__*/_jsxDEV(MaterialIcon, {\n                icon: \"update\",\n                size: 25,\n                color: \"rgb(139, 0, 0)\",\n                invert: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 27\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 21\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 15\n        }, this)]\n      }, item.commentaire, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ExperClass, \"TlCGJVjRgMhdOxP9VnuL+Z1ibRs=\");\n\n_c = ExperClass;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"ExperClass\");","map":{"version":3,"names":["React","useEffect","useState","databaseApp","ref","onValue","child","update","MaterialIcon","IconButton","ApexChart","ReactiveButton","ExperClass","id","i","comments","compentPositive","compentNegative","db_list","setDb_list","state","setState","init_db","snapshot","previousList","val","list","item","push","onClickHandler","setTimeout","callfunction","fetch","then","res","json","data","console","log","updatedata","index","predire","commentaire","countComments","map","admin","margin","float","borderRadius","marginTop","marginLeft","bind"],"sources":["/media/karim/Data_SSD/Procurement_Guide/client/src/components/commentaire/Commentaire.js"],"sourcesContent":["import React,{ useEffect, useState } from 'react';\nimport databaseApp from '../../config/firebaseConfig';\nimport { ref, onValue,child,update} from \"firebase/database\";\nimport MaterialIcon from 'material-icons-react';\nimport IconButton from '@mui/material/IconButton';\nimport ApexChart from './ApexChart'\nimport ReactiveButton from 'reactive-button';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nexport default function ExperClass({id}) {\n  let i = 0;\n  const comments = {compentPositive: 0, compentNegative: 0  };\n  const [db_list, setDb_list] = useState([]);\n  const [state, setState] = useState('idle');\n  useEffect(() => {\n    function init_db() {\n      onValue(ref(databaseApp, \"comments/\"+id.id), (snapshot) => {\n        let previousList = snapshot.val();\n        let list = [];\n        for (let item in previousList) {\n          list.push({ item, ...previousList[item] });\n        }\n        setDb_list(list);\n      })\n    }\n    init_db()\n  }, [id]);\n  \n  /* const deletdata= (index) =>{\n    console.log(index);\n    remove(child(ref(databaseApp), \"comment/\"+id.id+'/'+index));   \n  } */\n  \n  const onClickHandler = () => {\n    setState('loading');\n    setTimeout(() => {\n      setState('success');\n    }, 19500);\n  };\n  const callfunction = () => {\n    fetch(\"/IsOk?IsOk=yes\").then(res => res.json()).then(data =>{\n      console.log(data['IsOk'])\n    });\n  }\n\n  const updatedata= (index) =>{\n    console.log(index)\n    if(index.predire === \"positive\"){\n      update(child(ref(databaseApp), \"comments/\"+id.id+\"/\"+index.item),{\n        commentaire : index.commentaire,\n        predire: \"negative\",\n      })  \n    }else{\n      update(child(ref(databaseApp), \"comments/\"+id.id+\"/\"+index.item),{\n        commentaire : index.commentaire,\n        predire: \"positive\",\n      })  \n    }\n  }\n\n  const countComments = () =>{\n    db_list.map((item) => {\n      if(item.predire === \"positive\" ){\n        comments.compentPositive++ ;\n      }else{\n        comments.compentNegative++ ;\n      }\n    })\n    return comments\n  }\n\n  return (\n    <div>\n      {\n       id.admin ?(\n        <div style={{margin:\"5%\"}}>\n          <ApexChart  comments={countComments()}/>\n          <div style={{float:'right'}}>\n          <ReactiveButton buttonState={state} \n            onClick={() => {\n                onClickHandler();\n                callfunction();\n              }\n            } \n            color=\"teal\"\n            width={'200px'}\n            animation={true}\n            style={{ borderRadius: '25px', marginTop:'170%',marginLeft:'15%' }}\n            idleText={'Relancer le Modèle'}\n          />\n          </div>\n        </div>\n      \n        ): (null)\n      }\n      {\n        db_list && db_list.map((item) => {\n          return (\n            <div className=\"ShowComment\" key={item.commentaire}>\n              <h4><MaterialIcon icon=\"account_circle\" size={30} color='#000000' invert /> user{++i} : </h4>\n              <p className=\"text_\"  >\n                {item.commentaire} <br></br>\n                {\n                  id.admin ?\n                  (\n                    <span> avis : { item.predire }\n                      <IconButton onClick={updatedata.bind(this,item)}>\n                          <MaterialIcon icon=\"update\" size={25} color=\"rgb(139, 0, 0)\" invert /> \n                      </IconButton> \n                    </span>\n                  ): (null)\n                }\n              </p>\n              \n            </div>\n          )\n        })\n      }\n    </div>\n  )\n}; \n"],"mappings":"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"},"metadata":{},"sourceType":"module"}